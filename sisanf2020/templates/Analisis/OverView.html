{% extends 'Base/base.html' %}
{% block title %}
Análisis Financiero
{% endblock %}
{% block content %}
<div class="scrolling-box" style="background: rgb(255, 255, 255); opacity: 65%; padding: 8px;" align="center">
  <section id="tabs" class="tabs">
    <div class="container" data-aos="fade-up">
      <ul class="nav nav-tabs row d-flex">
        <li class="nav-item col-3">
          <a class="nav-link active show" data-toggle="tab" href="#tab-1">
            <i class="ri-gps-line"></i>
            <h4 class="d-none d-lg-block">Razones de liquidez</h4>
          </a>
        </li>
        <li class="nav-item col-3">
          <a class="nav-link" data-toggle="tab" href="#tab-2">
            <i class="ri-body-scan-line"></i>
            <h4 class="d-none d-lg-block">Razones de actividad</h4>
          </a>
        </li>
        <li class="nav-item col-3">
          <a class="nav-link" data-toggle="tab" href="#tab-3">
            <i class="ri-sun-line"></i>
            <h4 class="d-none d-lg-block">Razones de apalancamiento</h4>
          </a>
        </li>
        <li class="nav-item col-3">
          <a class="nav-link" data-toggle="tab" href="#tab-4">
            <i class="ri-store-line"></i>
            <h4 class="d-none d-lg-block">Razones de rentabilidad</h4>
          </a>
        </li>
      </ul>
      {%if AnEmp.count == 0%}
      <h2 class="mt-5" style="color:#000000">No existe análisis para la empresa {{ rasonsocial }} en el año ingresado.</h2>
      {% endif %}
      <div class="tab-content mt-0">
        <div class="tab-pane active show" id="tab-1">
          <section id="services" class="services section-bg">
            <div class="container" data-aos="fade-up">
              <div class="section-title">
                <h2>Liquidez</h2>
              </div>
              <table class="table table-striped table-dark table-sm">
                <thead class="table-dark">
                  <tr>
                    <th scope="col" align="center">Razón financiera</th>
                    <th scope="col" align="center">Resultado</th>
                    <th scope="col" align="center">Valor parametro</th>
                    <th scope="col" align="center">Situación de la empresa</th>
                    <th scope="col" align="center">Valor promedio del giro</th>
                    <th scope="col" align="center">Situación de la empresa</th>
                  </tr>
                </thead>
                <tbody>
                  {% for valor in dato %}
                    {% for resultado in Razones %}
                      {% for analisis in AnEmp %}
                    <tr>
                        {% if resultado.idAnalisis.idAnalisis == analisis.idAnalisis %}
                          {% if resultado.idRatios == valor.idRatio %}
                            {% if resultado.idRatios.categoria == "Liquidez"  %}
                              {% if resultado.valorRatiosAnalisis < valor.valorParametro %}
                                <td>{{ resultado.idRatios }}</td>
                                <td>{{ resultado.valorRatiosAnalisis }}</td>
                                <td>{{ valor.valorParametro }}</td>
                                <td>Su resultado es menor que el valor parametro</td>
                              {% else %}
                                <td>{{ resultado.idRatios }}</td>
                                <td>{{ resultado.valorRatiosAnalisis }}</td>
                                <td>{{ valor.valorParametro }}</td>
                                <td>Su resultado es mayor que el valor parametro</td>
                              {% endif %}
                              {% if resultado.valorRatiosAnalisis < valor.valorPromedio %}
                                <td>{{ valor.valorPromedio }}</td>
                                <td>Su resultado es menor que el valor promedio</td>
                              {% else %}
                                <td>{{ valor.valorPromedio }}</td>
                                <td>Su resultado es mayor que el valor promedio</td>
                              {% endif %}
                            {% endif %}
                          {% endif %}
                        {% endif %}
                    </tr>
                      {% endfor %}
                    {% endfor %}
                  {% endfor %}
                </tbody>
              </table>
          </section><!-- End Services Section -->
        </div>
        <div class="tab-pane" id="tab-2">
          <section id="services" class="services section-bg">
            <div class="container" data-aos="fade-up">
              <div class="section-title">
                <h2>Actividad</h2>
              </div>
              <table class="table table-striped table-dark table-sm">
                <thead class="table-dark">
                  <tr>
                    <th scope="col" align="center">Razón financiera</th>
                    <th scope="col" align="center">Resultado</th>
                    <th scope="col" align="center">Valor parametro</th>
                    <th scope="col" align="center">Situación de la empresa</th>
                    <th scope="col" align="center">Valor promedio del giro</th>
                    <th scope="col" align="center">Situación de la empresa</th>
                  </tr>
                </thead>
                <tbody>
                  {% for valor in dato %}
                    {% for resultado in Razones %}
                      {% for analisis in AnEmp %}
                    <tr>
                        {% if resultado.idAnalisis.idAnalisis == analisis.idAnalisis %}
                          {% if resultado.idRatios == valor.idRatio %}
                            {% if resultado.idRatios.categoria == "Actividad"  %}
                              {% if resultado.valorRatiosAnalisis < valor.valorParametro %}
                                <td>{{ resultado.idRatios }}</td>
                                <td>{{ resultado.valorRatiosAnalisis }}</td>
                                <td>{{ valor.valorParametro }}</td>
                                <td>Su resultado es menor que el valor parametro</td>
                              {% else %}
                                <td>{{ resultado.idRatios }}</td>
                                <td>{{ resultado.valorRatiosAnalisis }}</td>
                                <td>{{ valor.valorParametro }}</td>
                                <td>Su resultado es mayor que el valor parametro</td>
                              {% endif %}
                              {% if resultado.valorRatiosAnalisis < valor.valorPromedio %}
                                <td>{{ valor.valorPromedio }}</td>
                                <td>Su resultado es menor que el valor promedio</td>
                              {% else %}
                                <td>{{ valor.valorPromedio }}</td>
                                <td>Su resultado es mayor que el valor promedio</td>
                              {% endif %}
                            {% endif %}
                          {% endif %}
                        {% endif %}
                    </tr>
                      {% endfor %}
                    {% endfor %}
                  {% endfor %}
                </tbody>
              </table>
          </section><!-- End Services Section -->
        </div>
        <div class="tab-pane" id="tab-3">
          <section id="services" class="services section-bg">
            <div class="container" data-aos="fade-up">
              <div class="section-title">
                <h2>Apalancamiento</h2>
              </div>
              <table class="table table-striped table-dark table-sm">
                <thead class="table-dark">
                  <tr>
                    <th scope="col" align="center">Razón financiera</th>
                    <th scope="col" align="center">Resultado</th>
                    <th scope="col" align="center">Valor parametro</th>
                    <th scope="col" align="center">Situación de la empresa</th>
                    <th scope="col" align="center">Valor promedio del giro</th>
                    <th scope="col" align="center">Situación de la empresa</th>
                  </tr>
                </thead>
                <tbody>
                  {% for valor in dato %}
                    {% for resultado in Razones %}
                      {% for analisis in AnEmp %}
                    <tr>
                        {% if resultado.idAnalisis.idAnalisis == analisis.idAnalisis %}
                          {% if resultado.idRatios == valor.idRatio %}
                            {% if resultado.idRatios.categoria == "Apalancamiento"  %}
                              {% if resultado.valorRatiosAnalisis < valor.valorParametro %}
                                <td>{{ resultado.idRatios }}</td>
                                <td>{{ resultado.valorRatiosAnalisis }}</td>
                                <td>{{ valor.valorParametro }}</td>
                                <td>Su resultado es menor que el valor parametro</td>
                              {% else %}
                                <td>{{ resultado.idRatios }}</td>
                                <td>{{ resultado.valorRatiosAnalisis }}</td>
                                <td>{{ valor.valorParametro }}</td>
                                <td>Su resultado es mayor que el valor parametro</td>
                              {% endif %}
                              {% if resultado.valorRatiosAnalisis < valor.valorPromedio %}
                                <td>{{ valor.valorPromedio }}</td>
                                <td>Su resultado es menor que el valor promedio</td>
                              {% else %}
                                <td>{{ valor.valorPromedio }}</td>
                                <td>Su resultado es mayor que el valor promedio</td>
                              {% endif %}
                            {% endif %}
                          {% endif %}
                        {% endif %}
                    </tr>
                      {% endfor %}
                    {% endfor %}
                  {% endfor %}
                </tbody>
              </table>
          </section><!-- End Services Section -->
        </div>
        <div class="tab-pane" id="tab-4">
          <section id="services" class="services section-bg">
            <div class="container" data-aos="fade-up">
              <div class="section-title">
                <h2>Rentabilidad</h2>
              </div>
              <table class="table table-striped table-dark table-sm">
                <thead class="table-dark">
                  <tr>
                    <th scope="col" align="center">Razón financiera</th>
                    <th scope="col" align="center">Resultado</th>
                    <th scope="col" align="center">Valor parametro</th>
                    <th scope="col" align="center">Situación de la empresa</th>
                    <th scope="col" align="center">Valor promedio del giro</th>
                    <th scope="col" align="center">Situación de la empresa</th>
                  </tr>
                </thead>
                <tbody>
                  {% for valor in dato %}
                    {% for resultado in Razones %}
                      {% for analisis in AnEmp %}
                    <tr>
                        {% if resultado.idAnalisis.idAnalisis == analisis.idAnalisis %}
                          {% if resultado.idRatios == valor.idRatio %}
                            {% if resultado.idRatios.categoria == "Rentabilidad"  %}
                              {% if resultado.valorRatiosAnalisis < valor.valorParametro %}
                                <td>{{ resultado.idRatios }}</td>
                                <td>{{ resultado.valorRatiosAnalisis }}</td>
                                <td>{{ valor.valorParametro }}</td>
                                <td>Su resultado es menor que el valor parametro</td>
                              {% else %}
                                <td>{{ resultado.idRatios }}</td>
                                <td>{{ resultado.valorRatiosAnalisis }}</td>
                                <td>{{ valor.valorParametro }}</td>
                                <td>Su resultado es mayor que el valor parametro</td>
                              {% endif %}
                              {% if resultado.valorRatiosAnalisis < valor.valorPromedio %}
                                <td>{{ valor.valorPromedio }}</td>
                                <td>Su resultado es menor que el valor promedio</td>
                              {% else %}
                                <td>{{ valor.valorPromedio }}</td>
                                <td>Su resultado es mayor que el valor promedio</td>
                              {% endif %}
                            {% endif %}
                          {% endif %}
                        {% endif %}
                    </tr>
                      {% endfor %}
                    {% endfor %}
                  {% endfor %}
                </tbody>
              </table>
          </section><!-- End Services Section -->
        </div>
      </div>
    </div>
  </section><!-- End Tabs Section -->
</div>
<div class="fixed-bottom header-scrolled" style="background: #fff">
  <div class ="container-fluid">
    <div class="row justify-content-center">
      <div class="col-xl-10 d-flex align-items-right">
        <div class="nav-menu d-none d-lg-block">
          <ul>
            <li class="active"><a href="#header">Overview</a></li>
            <li><a href="{% url 'Analisis:AnalisisHorizontal' empresa=1 %}">Análisis Horizontal</a></li>
            <li><a href="{% url 'Analisis:AnalisisHorizontal' empresa=1 %}">Análisis Vertical</a></li>
            <li><a href="{% url 'Analisis:AnalisisHorizontal' empresa=1 %}">Razones financieras</a></li>
          </ul>
        </div>
      </div>
    </div>
  </div>
</div>
{% endblock %}
